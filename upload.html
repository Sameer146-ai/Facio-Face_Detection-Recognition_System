<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FACIO - Face & Image Recognition</title>
    <link rel="stylesheet" href="upload.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="background-overlay"></div>

    <div class="logo-container">
      <img src="/assets/logo-modern.png" alt="FACIO Logo" class="logo" />
      <h1>Face & Image Recognition System</h1>
    </div>

    <div class="main-container">
      <div class="content">
        <div class="container">
          <h2>Face Detection</h2>
          <div class="upload-box">
            <input type="file" id="faceUpload" accept="image/*" />
            <label for="faceUpload">Choose an Image</label>
          </div>
          <div class="image-preview" id="facePreview">
            <p>No image uploaded</p>
          </div>

          <button class="delete-btn" onclick="deleteImage('facePreview')">
            Delete
          </button>
          <button class="submit-btn" onclick="handleSubmit('faceUpload')">
            Submit
          </button>
        </div>

        <div class="container">
          <h2>Image Description</h2>
          <div class="upload-box">
            <input type="file" id="descUpload" accept="image/*" />
            <label for="descUpload">Choose an Image</label>
          </div>
          <div class="image-preview" id="descPreview">
            <p>No image uploaded</p>
          </div>
          <button class="delete-btn" onclick="deleteImage('facePreview')">
            Delete
          </button>
          <button class="submit-btn" onclick="handleSubmit('descUpload')">
            Submit
          </button>
        </div>

        <div class="container">
          <h2>Facial Expression Analysis</h2>
          <div class="upload-box">
            <input type="file" id="expressionUpload" accept="image/*" />
            <label for="expressionUpload">Choose an Image</label>
          </div>
          <div class="image-preview" id="expressionPreview">
            <p>No image uploaded</p>
          </div>
          <button class="delete-btn" onclick="deleteImage('facePreview')">
            Delete
          </button>
          <button class="submit-btn" onclick="handleSubmit('expressionUpload')">
            Submit
          </button>
        </div>

        <div class="container">
          <h2>Celebrity Detection</h2>
          <div class="upload-box">
            <input type="file" id="celebrityUpload" accept="image/*" />
            <label for="celebrityUpload">Choose an Image</label>
          </div>
          <div class="image-preview" id="celebrityPreview">
            <p>No image uploaded</p>
          </div>
          <button class="delete-btn" onclick="deleteImage('facePreview')">
            Delete
          </button>
          <button class="submit-btn" onclick="handleSubmit('celebrityUpload')">
            Submit
          </button>
        </div>
        <!-- copare_face -->
        <!-- <div class="container">
          <h2>Face Comparison</h2>
          <div class="upload-box">
            <input type="file" id="faceCompare1" accept="image/*" />
            <label for="faceCompare1">Choose First Image</label>
          </div>
          <div class="image-preview" id="comparePreview1">
            <p>No image uploaded</p>
          </div>
        
          <div class="upload-box">
            <input type="file" id="faceCompare2" accept="image/*" />
            <label for="faceCompare2">Choose Second Image</label>
          </div>
          <div class="image-preview" id="comparePreview2">
            <p>No image uploaded</p>
          </div>
        
          <button class="submit-btn" onclick="handleFaceComparison()">
            Compare Faces
          </button>
        </div> -->
        
      </div>
      <!-- <div
          id="apiResponse"
          style="margin-top: 20px; padding: 10px; border: 1px solid #ddd"
        >
          <strong>Response:</strong>
          <span id="responseText">Here You See Your Response....‚¨áÔ∏è</span>
        </div> -->

      <div id="apiResponse">
        <strong>Response:</strong>
        <div class="loader" id="responseLoader"></div>
        <span id="responseText">Here You See Your Response....‚¨áÔ∏è</span>
      </div>
    </div>

    <script>
      function previewImage(inputId, previewId) {
        const uploadInput = document.getElementById(inputId);
        const previewDiv = document.getElementById(previewId);

        uploadInput.addEventListener("change", function () {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
              previewDiv.innerHTML = `<img src="${event.target.result}" alt="Uploaded Image">`;
            };
            reader.readAsDataURL(file);
          } else {
            previewDiv.innerHTML = `<p>No image uploaded</p>`;
          }
        });
      }

      function deleteImage(previewId) {
        document.getElementById(
          previewId
        ).innerHTML = `<p>No image uploaded</p>`;
      }

      function submitImage(type) {
        alert(`Image submitted for ${type}!`);
      }

      previewImage("faceUpload", "facePreview");
      previewImage("descUpload", "descPreview");
      previewImage("expressionUpload", "expressionPreview");
      previewImage("celebrityUpload", "celebrityPreview");

      function handleSubmit(inputId) {
        console.log("üñº Handling submit for input:", inputId);

        const fileInput = document.getElementById(inputId);
        if (!fileInput || !fileInput.files.length) {
          console.error("‚ùå No file selected!");
          alert("Please select an image before submitting.");
          return;
        }

        console.log("üì§ Submitting file:", fileInput.files[0].name);

        console.log("üöÄ Calling submitImage()");
        submitImage(inputId);
      }
    </script>
    <script>
      console.log("JavaScript is loaded and running!");
    </script>
    <script type="module" src="upload.js" defer></script>
  </body>
</html>
